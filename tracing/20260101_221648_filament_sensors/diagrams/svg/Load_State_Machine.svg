<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="1061px" preserveAspectRatio="none" style="width:729px;height:1061px;background:#FEFEFE;" version="1.1" viewBox="0 0 729 1061" width="729px" zoomAndPan="magnify"><title>Load State Machine (FF10 Subcmds)</title><defs/><g><rect fill="#FEFEFE" height="1061" style="stroke:none;stroke-width:1;" width="729" x="0" y="0"/><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="244.2617" x="235.8523" y="23.1318">Load State Machine (FF10 Subcmds)</text></g><g class="entity" data-entity="N1" data-source-line="5" data-uid="ent0002" id="entity_N1"><path d="M6,43.0986 L6,142.791 L473.4814,142.791 L473.4814,53.0986 L463.4814,43.0986 L6,43.0986" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M463.4814,43.0986 L463.4814,53.0986 L473.4814,53.0986 L463.4814,43.0986" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="94.6563" x="12" y="60.2925">Idiosyncrasies:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="315.377" x="12" y="75.2412">- INIT is blocking (~4.4s) - feeds filament to box sensor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381.4751" x="12" y="90.1899">- SENSOR_DETECTED is instant confirmation, not a waiting state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="434.5923" x="12" y="105.1387">- FEED_TO_EXTRUDER is the actual polling phase (status=0x0C until OK)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="446.4814" x="12" y="120.0874">- COMPLETE always returns OK immediately; 4x repetition is for confirmation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="342.5259" x="12" y="135.0361">- Subcmd values skip 01-03 (0x00, 0x04, 0x05, 0x06, 0x07)</text></g><ellipse cx="518.5" cy="93.0986" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><g id="INIT"><rect fill="#F1F1F1" height="77.4951" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="157.0684" x="440" y="219.0986"/><line style="stroke:#181818;stroke-width:0.5;" x1="440" x2="597.0684" y1="245.1973" y2="245.1973"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4414" x="505.3135" y="237.2305">INIT</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="100.0371" x="445" y="261.4531">Entry: Initialize slot</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="82.043" x="445" y="275.252">Motor: Running</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137.0684" x="445" y="289.0508">Duration: ~4.4s (blocking)</text></g><g id="SENSOR_DETECTED"><rect fill="#F1F1F1" height="63.6963" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="162.3584" x="437.5" y="387.0986"/><line style="stroke:#181818;stroke-width:0.5;" x1="437.5" x2="599.8584" y1="413.1973" y2="413.1973"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142.3584" x="447.5" y="405.2305">SENSOR_DETECTED</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121.3887" x="442.5" y="429.4531">Filament at box sensor</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="78.6973" x="442.5" y="443.252">Motor: Starting</text></g><g id="FEED_TO_EXTRUDER"><rect fill="#F1F1F1" height="77.4951" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169.3584" x="434" y="542.0986"/><line style="stroke:#181818;stroke-width:0.5;" x1="434" x2="603.3584" y1="568.1973" y2="568.1973"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.3584" x="444" y="560.2305">FEED_TO_EXTRUDER</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104.0625" x="439" y="584.4531">Pushing to extruder</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="82.043" x="439" y="598.252">Motor: Running</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135.3867" x="439" y="612.0508">Velocity: 350-450mm/min</text></g><g id="FLUSH"><rect fill="#F1F1F1" height="77.4951" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="126.7227" x="455" y="725.0986"/><line style="stroke:#181818;stroke-width:0.5;" x1="455" x2="581.7227" y1="751.1973" y2="751.1973"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8965" x="495.4131" y="743.2305">FLUSH</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106.7227" x="460" y="767.4531">Purging old material</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="82.043" x="460" y="781.252">Motor: Running</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81.7148" x="460" y="795.0508">Duration: ~4.7s</text></g><g id="COMPLETE"><rect fill="#F1F1F1" height="63.6963" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116.375" x="460.5" y="893.0986"/><line style="stroke:#181818;stroke-width:0.5;" x1="460.5" x2="576.875" y1="919.1973" y2="919.1973"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.0137" x="480.1807" y="911.2305">COMPLETE</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96.375" x="465.5" y="935.4531">status=OK always</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="82.0488" x="465.5" y="949.252">Motor: Stopped</text></g><ellipse cx="518.5" cy="1044.0986" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="518.5" cy="1044.0986" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><!--link *start* to INIT--><g class="link" data-entity-1=".start." data-entity-2="INIT" data-source-line="13" data-uid="lnk4" id="link_.start._INIT"><path d="M518.5,103.2986 C518.5,125.1186 518.5,175.0086 518.5,212.9186" fill="none" id="*start*-to-INIT" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.5,218.9186,522.5,209.9186,518.5,213.9186,514.5,209.9186,518.5,218.9186" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.0254" x="519.5" y="186.2925">FF10 xx 00</text></g><!--link INIT to SENSOR_DETECTED--><g class="link" data-entity-1="INIT" data-entity-2="SENSOR_DETECTED" data-source-line="15" data-uid="lnk6" id="link_INIT_SENSOR_DETECTED"><path d="M518.5,296.3986 C518.5,324.0386 518.5,355.0686 518.5,380.9986" fill="none" id="INIT-to-SENSOR_DETECTED" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.5,386.9986,522.5,377.9986,518.5,381.9986,514.5,377.9986,518.5,386.9986" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.0254" x="519.5" y="339.2925">FF10 xx 04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.0186" x="525.0034" y="354.2412">(@~4.4s)</text></g><!--link SENSOR_DETECTED to FEED_TO_EXTRUDER--><g class="link" data-entity-1="SENSOR_DETECTED" data-entity-2="FEED_TO_EXTRUDER" data-source-line="20" data-uid="lnk8" id="link_SENSOR_DETECTED_FEED_TO_EXTRUDER"><path d="M518.5,451.2286 C518.5,477.2486 518.5,508.4386 518.5,536.0886" fill="none" id="SENSOR_DETECTED-to-FEED_TO_EXTRUDER" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.5,542.0886,522.5,533.0886,518.5,537.0886,514.5,533.0886,518.5,542.0886" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.0254" x="519.5" y="494.2925">FF10 xx 05</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.0186" x="525.0034" y="509.2412">(@~4.5s)</text></g><!--link FEED_TO_EXTRUDER to FEED_TO_EXTRUDER--><g class="link" data-entity-1="FEED_TO_EXTRUDER" data-entity-2="FEED_TO_EXTRUDER" data-source-line="24" data-uid="lnk9" id="link_FEED_TO_EXTRUDER_FEED_TO_EXTRUDER"><path d="M603.08,565.1386 C623.16,566.3786 638,571.5386 638,580.5986 C638,589.6586 629.1486,594.4488 609.0686,595.6888" fill="none" id="FEED_TO_EXTRUDER-to-FEED_TO_EXTRUDER" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="603.08,596.0586,612.3094,599.4963,608.0705,595.7505,611.8163,591.5115,603.08,596.0586" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.6235" x="644.1714" y="578.2925">status=0x0C</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9663" x="644" y="593.2412">(in progress)</text></g><!--link FEED_TO_EXTRUDER to FLUSH--><g class="link" data-entity-1="FEED_TO_EXTRUDER" data-entity-2="FLUSH" data-source-line="25" data-uid="lnk11" id="link_FEED_TO_EXTRUDER_FLUSH"><path d="M518.5,619.0986 C518.5,650.0586 518.5,687.7986 518.5,718.8286" fill="none" id="FEED_TO_EXTRUDER-to-FLUSH" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.5,724.8286,522.5,715.8286,518.5,719.8286,514.5,715.8286,518.5,724.8286" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.0581" x="521.4836" y="662.2925">status=OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.0254" x="519.5" y="677.2412">FF10 xx 06</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.2485" x="521.3884" y="692.1899">(@~15.9s)</text></g><!--link FLUSH to COMPLETE--><g class="link" data-entity-1="FLUSH" data-entity-2="COMPLETE" data-source-line="30" data-uid="lnk13" id="link_FLUSH_COMPLETE"><path d="M518.5,802.3986 C518.5,830.0386 518.5,861.0686 518.5,886.9986" fill="none" id="FLUSH-to-COMPLETE" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.5,892.9986,522.5,883.9986,518.5,887.9986,514.5,883.9986,518.5,892.9986" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.0254" x="519.5" y="845.2925">FF10 xx 07</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.2485" x="521.3884" y="860.2412">(@~20.6s)</text></g><!--link COMPLETE to COMPLETE--><g class="link" data-entity-1="COMPLETE" data-entity-2="COMPLETE" data-source-line="35" data-uid="lnk14" id="link_COMPLETE_COMPLETE"><path d="M576.62,911.9786 C596,911.9786 611.5,916.3486 611.5,925.0986 C611.5,933.8486 602,938.2186 582.62,938.2186" fill="none" id="COMPLETE-to-COMPLETE" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="576.62,938.2186,585.62,942.2186,581.62,938.2186,585.62,934.2186,576.62,938.2186" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71.5063" x="617.5" y="930.2925">Confirm (4x)</text></g><!--link COMPLETE to *end*--><g class="link" data-entity-1="COMPLETE" data-entity-2=".end." data-source-line="36" data-uid="lnk16" id="link_COMPLETE_.end."><path d="M518.5,957.1486 C518.5,982.3286 518.5,1010.2886 518.5,1026.9786" fill="none" id="COMPLETE-to-*end*" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="518.5,1032.9786,522.5,1023.9786,518.5,1027.9786,514.5,1023.9786,518.5,1032.9786" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1372" x="519.5" y="1000.2925">All confirmed</text></g><!--SRC=[TPDjRzem4CVV-rESj3U0IXVMfDKoRTe4GKFbeG8wJLedP183LXqxifqrxCK- -yxcOIamHV8Bd-_kT__xnt8h60mLpM1cgMKmekc6ImQDVhyJmAnSfdbcciGySrbGJNDOqlHvhLKfiwuIIiERVk8-GgJ2T6fWt240hTOWuyfiPQgfuSp4hHRUjc4m7io16rWAbMB9DJJ-XDUXQM9enLXcOCK5pPcqO1KiLGM6IQEqpvqbuzbakkWbywGxJtgk39V6KdoSAhdYEgUMAta5I08KNYYtheDnS_a2_IJfBUQJHV9zFdti9LDNmMuGEhKb5L0e8Ln2iQ461N1vfVaOL44NIccvWCbzqzVfJaOFGwG0Abxere1cjjJIO1nudhECOqEn_G1XXQ62MUwmNBCLwbL7tOtbDOPVL9JC00fTGD1f1pVGmDR15U0P-ZFovwq_xvg4oSnDoWZvqVe9xVQddRWn-CrL5GG18VxAnKx5gpqBdsJZysuDP5yYaLPlOnX8HAU2_sPWXBA7w4XPfMEObbAYNeVRNgdzK37uMj0uxBX9o6btHtIsZHfIj4UA4Ea2-S4ZrDOzSlvm3uhEriuAX9pr_0z8RVT8mYKKMgqrCuXpkSJmSVRrNzxa_aaUPxdritIYw_UNicDuACt6sGuDpoghoupfIyzEHB_muXj3mRd5lTr4GJkCWZn_ctE9KtiwntbqRathEy_tBhY-TNpxGHvAlNPGIcI0NcKQRN0CdgBihryPuCuGSknsqhgx-mMW4LRDru-SasFu8iJXDs4PgIKUvTt_UVNOSTUgA33hBm00]--></g></svg>