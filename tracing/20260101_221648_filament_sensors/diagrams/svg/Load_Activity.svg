<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="949px" preserveAspectRatio="none" style="width:525px;height:949px;background:#FEFEFE;" version="1.1" viewBox="0 0 525 949" width="525px" zoomAndPan="magnify"><title>Load Activity Diagram</title><defs/><g><rect fill="#FEFEFE" height="949" style="stroke:none;stroke-width:1;" width="525" x="0" y="0"/><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="147.8135" x="187.3779" y="33.1318">Load Activity Diagram</text></g><ellipse cx="139.6992" cy="57.0986" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="144.7168" x="67.3408" y="87.0986"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124.7168" x="77.3408" y="108.3545">Receive TnX command</text><rect fill="#FFFFE0" height="189.4951" style="stroke:#000000;stroke-width:1.5;" width="486.915" x="27.6543" y="130.8975"/><path d="M210.7881,130.8975 L210.7881,139.9961 L200.7881,149.9961 L27.6543,149.9961" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173.1338" x="30.6543" y="145.0293">INIT Phase (~4.4s blocking)</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="201.3945" x="39.002" y="166.9961"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="181.3945" x="49.002" y="188.252">Send INIT command (FF10 xx 00)</text><path d="M261.7441,225.22 L261.7441,233.6943 L241.7441,237.6943 L261.7441,241.6943 L261.7441,250.1687 A0,0 0 0 0 261.7441,250.1687 L504.5693,250.1687 A0,0 0 0 0 504.5693,250.1687 L504.5693,235.22 L494.5693,225.22 L261.7441,225.22 A0,0 0 0 0 261.7441,225.22" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M494.5693,225.22 L494.5693,235.22 L504.5693,235.22 L494.5693,225.22" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221.8252" x="267.7441" y="242.4138">Hardware blocks until sensor triggered</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="204.0898" x="37.6543" y="220.7949"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184.0898" x="47.6543" y="242.0508">Motor feeds filament to box sensor</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="181.0508" x="49.1738" y="274.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="161.0508" x="59.1738" y="295.8496">Wait for INIT response (~4.4s)</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="257.3984" x="11" y="340.3926"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="237.3984" x="21" y="361.6484">SENSOR_DETECTED (instant confirmation)</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="182.0469" x="48.6758" y="394.1914"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162.0469" x="58.6758" y="415.4473">Begin FEED_TO_EXTRUDER</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="205.3848" x="37.0068" y="491.9902"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="185.3848" x="47.0068" y="513.2461">Send FEED_TO_EXTRUDER cmd</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="89.3633" x="95.0176" y="553.2891"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69.3633" x="105.0176" y="574.5449">Check status</text><polygon fill="#F1F1F1" points="139.6992,447.9902,151.6992,459.9902,139.6992,471.9902,127.6992,459.9902,139.6992,447.9902" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="105.915,607.0879,173.4834,607.0879,185.4834,619.0879,173.4834,631.0879,105.915,631.0879,93.915,619.0879,105.915,607.0879" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67.5684" x="105.915" y="623.0813">status=0x0C?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="17.1177" x="185.4834" y="616.7568">yes</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="129.3945" x="75.002" y="672.0679"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="109.3945" x="85.002" y="693.3237">Begin FLUSH phase</text><path d="M227.3906,715.8667 L227.3906,746.7642 L207.3906,750.7642 L227.3906,754.7642 L227.3906,785.6616 A0,0 0 0 0 227.3906,785.6616 L383.1387,785.6616 A0,0 0 0 0 383.1387,785.6616 L383.1387,725.8667 L373.1387,715.8667 L227.3906,715.8667 A0,0 0 0 0 227.3906,715.8667" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M373.1387,715.8667 L373.1387,725.8667 L383.1387,725.8667 L373.1387,715.8667" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.4917" x="233.3906" y="733.0605">Purge time varies by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1499" x="233.3906" y="748.0093">color transition:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.3408" x="233.3906" y="762.958">- Similar colors: ~4.7s</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.748" x="233.3906" y="777.9067">- Different colors: ~9.3s</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135.3828" x="72.0078" y="733.8647"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115.3828" x="82.0078" y="755.1206">Purge old color (4-9s)</text><path d="M273.4014,802.6123 L273.4014,818.561 L253.4014,822.561 L273.4014,826.561 L273.4014,842.5098 A0,0 0 0 0 273.4014,842.5098 L475.7285,842.5098 A0,0 0 0 0 475.7285,842.5098 L475.7285,812.6123 L465.7285,802.6123 L273.4014,802.6123 A0,0 0 0 0 273.4014,802.6123" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M465.7285,802.6123 L465.7285,812.6123 L475.7285,812.6123 L465.7285,802.6123" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.3271" x="279.4014" y="819.8062">COMPLETE always returns OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.0635" x="279.4014" y="834.7549">Multiple sends for reliability</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="227.4043" x="25.9971" y="805.6616"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="207.4043" x="35.9971" y="826.9175">Send COMPLETE (4x for confirmation)</text><rect fill="#F1F1F1" height="33.7988" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="91.3906" x="94.0039" y="862.5098"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71.3906" x="104.0039" y="883.7656">Load finished</text><ellipse cx="139.6992" cy="927.3086" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="139.6992" cy="927.3086" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="67.0986" y2="87.0986"/><polygon fill="#181818" points="135.6992,77.0986,139.6992,87.0986,143.6992,77.0986,139.6992,81.0986" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="200.7949" y2="220.7949"/><polygon fill="#181818" points="135.6992,210.7949,139.6992,220.7949,143.6992,210.7949,139.6992,214.7949" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="254.5938" y2="274.5938"/><polygon fill="#181818" points="135.6992,264.5938,139.6992,274.5938,143.6992,264.5938,139.6992,268.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="120.8975" y2="166.9961"/><polygon fill="#181818" points="135.6992,156.9961,139.6992,166.9961,143.6992,156.9961,139.6992,160.9961" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="308.3926" y2="340.3926"/><polygon fill="#181818" points="135.6992,330.3926,139.6992,340.3926,143.6992,330.3926,139.6992,334.3926" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="374.1914" y2="394.1914"/><polygon fill="#181818" points="135.6992,384.1914,139.6992,394.1914,143.6992,384.1914,139.6992,388.1914" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="525.7891" y2="553.2891"/><polygon fill="#181818" points="135.6992,543.2891,139.6992,553.2891,143.6992,543.2891,139.6992,547.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="471.9902" y2="491.9902"/><polygon fill="#181818" points="135.6992,481.9902,139.6992,491.9902,143.6992,481.9902,139.6992,485.9902" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="185.4834" x2="254.3916" y1="619.0879" y2="619.0879"/><polygon fill="#181818" points="250.3916,545.7891,254.3916,535.7891,258.3916,545.7891,254.3916,541.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="254.3916" x2="254.3916" y1="459.9902" y2="619.0879"/><line style="stroke:#181818;stroke-width:1;" x1="254.3916" x2="151.6992" y1="459.9902" y2="459.9902"/><polygon fill="#181818" points="161.6992,455.9902,151.6992,459.9902,161.6992,463.9902,157.6992,459.9902" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="587.0879" y2="607.0879"/><polygon fill="#181818" points="135.6992,597.0879,139.6992,607.0879,143.6992,597.0879,139.6992,601.0879" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="427.9902" y2="447.9902"/><polygon fill="#181818" points="135.6992,437.9902,139.6992,447.9902,143.6992,437.9902,139.6992,441.9902" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="631.0879" y2="672.0679"/><polygon fill="#181818" points="135.6992,662.0679,139.6992,672.0679,143.6992,662.0679,139.6992,666.0679" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74.2822" x="143.6992" y="652.2368">no (status=OK)</text><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="705.8667" y2="733.8647"/><polygon fill="#181818" points="135.6992,723.8647,139.6992,733.8647,143.6992,723.8647,139.6992,727.8647" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="767.6636" y2="805.6616"/><polygon fill="#181818" points="135.6992,795.6616,139.6992,805.6616,143.6992,795.6616,139.6992,799.6616" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="839.4604" y2="862.5098"/><polygon fill="#181818" points="135.6992,852.5098,139.6992,862.5098,143.6992,852.5098,139.6992,856.5098" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="139.6992" x2="139.6992" y1="896.3086" y2="916.3086"/><polygon fill="#181818" points="135.6992,906.3086,139.6992,916.3086,143.6992,906.3086,139.6992,910.3086" style="stroke:#181818;stroke-width:1;"/><!--SRC=[NLDTQzj047o_Nx4aB_A3WqiD9J9jQIsPXDYniHMQFfcpj98Nd-x4tVcBqlxsxad6944lqitixkpCoPDN25CZ2_YHUpgGFqD2ihAo5cv7kf7y1XkPxofhzheO6sKit4xIy0ZXlBHUY7Y9ET818TEla9kwbheO2S75dZmP3JUFpuyPBBRI8KJ_XdT31njbSXvGzMxWTahLrlz6fSmH_WY0U8MwWBRcqWsYoUJJ04ud60nweq2P6SzAIiJ2GKbArgWzU0CRSmA7sXaRQDfu11lQymV0WxJ5KLhifZlOQq_gGWVFl0ej5amDyqDjcFHBaeUI2QqWYwun-he7Y_dB1gpIvzLykKxIB1rdQG8HQVQ65UL6bsHh6MnWheX_OaKQ9ccQhBFvEdtDbYz9kcJ4OeFINxV_o82yBjh5nrlCTy3T_TwDBbLmt1Bd67MdNmUdmVXx3yX1T4RN4_rllCmLdJ-z5J9zMJr04v8PYNYnjnM2KGNh3a57m_vzMF6TZHt9Kurma9QGipppSLVXhTIk3JtcipwigEPmR8Uw6DYqBwv54YfBThlrw8BTttrsucgzw8mOpsUBAVlAOavj31yiVQVjIfRgAC-Eq_9xgntCdnYSxPMdXdtYmCEjuLuM5SaDARxtRmUtFqH9cjmMsNNdJIF-0m00]--></g></svg>