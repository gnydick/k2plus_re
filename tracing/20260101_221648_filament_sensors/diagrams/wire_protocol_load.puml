@startuml Wire_Protocol_Load
title FF10 Load Command Wire Format
skinparam backgroundColor #FEFEFE

rectangle "Request Frame" {
    rectangle "ADDR\n(1 byte)" as R1 #LightBlue
    rectangle "LEN\n0x06" as R2 #LightGreen
    rectangle "CMD\nFF 10" as R3 #LightYellow
    rectangle "SLOT\n(1 byte)" as R4 #LightPink
    rectangle "SUBCMD\n(1 byte)" as R5 #LightCoral
    rectangle "PARAM\n(1 byte)" as R6 #LightGray
}

rectangle "Response Frame" {
    rectangle "PREFIX\n0xF7" as S1 #LightBlue
    rectangle "ADDR\n(1 byte)" as S2 #LightGreen
    rectangle "LEN\n(1 byte)" as S3 #LightYellow
    rectangle "STATUS\n(1 byte)" as S4 #LightPink
    rectangle "CMD\n0x10" as S5 #LightCoral
    rectangle "DATA\n(variable)" as S6 #LightGray
    rectangle "CRC\n(1 byte)" as S7 #Wheat
}

note bottom of R4
  SLOT values:
  01 = Slot A
  02 = Slot B
end note

note bottom of R5
  SUBCMD values:
  00 = INIT
  04 = SENSOR_DETECTED
  05 = FEED_TO_EXTRUDER
  06 = FLUSH
  07 = COMPLETE
end note

note bottom of S4
  STATUS values:
  00 = OK
  01 = ERROR
  02 = BUSY
  0C = In Progress (FEED_TO_EXTRUDER only)

  **NOTE**: COMPLETE phase always
  returns 00 (OK) immediately.
  Polling occurs during
  FEED_TO_EXTRUDER (status=0x0C).
end note

@enduml
